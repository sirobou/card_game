import{c as F,_ as A,p as V,B as z,a as H,b as U,t as j,d as L}from"./Player-ea3467f4.js";import{d as h,a as d,o as t,h as p,e as l,w as a,f as m,_ as g,u as E,p as C,F as P,n as G,b as _,q as w,j as x,t as D,s as b,c as R,v as W,x as M,r as k,k as N,y as q,i as J,m as K}from"./index-e70186fd.js";const Q=h({__name:"GamePlayerActionForm",props:{disabled:{type:Boolean}},emits:["hit","stand"],setup(o,{emit:e}){const s=o,r=e,n=()=>r("hit"),c=()=>r("stand");return(v,u)=>{const f=d("v-btn");return t(),p("div",null,[l(f,{color:"primary",onClick:n,disabled:s.disabled},{default:a(()=>[m("Hit")]),_:1},8,["disabled"]),l(f,{color:"primary",onClick:c,disabled:s.disabled},{default:a(()=>[m("Stand")]),_:1},8,["disabled"])])}}});const X=g(Q,[["__scopeId","data-v-43a0a0f7"]]),Y=h({__name:"Card",props:{card:{},size:{}},setup(o){E(n=>({"1a10f4d6":r(e.size)}));const e=o,s=F(e.card),r=n=>`${n}rem`;return(n,c)=>(t(),p("div",null,[l(A,{name:C(s)},null,8,["name"])]))}});const $=g(Y,[["__scopeId","data-v-1ee879d4"]]),Z={class:"hand"},ee=h({__name:"GamePlayerHand",props:{hand:{}},setup(o){const e=o;return(s,r)=>(t(),p("div",Z,[(t(!0),p(P,null,G(e.hand,n=>(t(),p("span",null,[l($,{card:n,size:9.5},null,8,["card"])]))),256))]))}});const ae=g(ee,[["__scopeId","data-v-30556294"]]),T=o=>o.hasOwnProperty("isBust")&&o.isBust?"#FFCDD2":o.isStand?"#BBDEFB":"",te={class:"player-name"},ne={class:"player-score"},se=h({__name:"GamePlayer",props:{player:{},hasTurn:{type:Boolean}},emits:["action"],setup(o,{emit:e}){const s=o,r=e,n=()=>r("action","hit"),c=()=>r("action","stand");return(v,u)=>{const f=d("v-chip"),i=d("v-row"),y=d("v-container"),I=d("v-card");return t(),_(I,{class:b(s.hasTurn&&"v-card--turn-holder"),color:C(T)(s.player)},{default:a(()=>[l(y,null,{default:a(()=>[l(i,{align:"center",justify:"center"},{default:a(()=>[s.player.isBust?(t(),_(f,{key:0,color:"error",variant:"elevated"},{default:a(()=>[m("BUSTED")]),_:1})):w("",!0),s.player.isStand?(t(),_(f,{key:1,color:"primary",variant:"elevated"},{default:a(()=>[m("STAND")]),_:1})):w("",!0),x("span",te,D(s.player.name),1),x("span",ne,"score: "+D(s.player.score),1)]),_:1}),l(i,{align:"center",justify:"center"},{default:a(()=>[l(X,{onHit:n,onStand:c,disabled:s.player.isStand||s.player.isBust},null,8,["disabled"])]),_:1}),l(i,{align:"center",justify:"center"},{default:a(()=>[l(ae,{hand:s.player.hand},null,8,["hand"])]),_:1})]),_:1})]),_:1},8,["class","color"])}}});const le=g(se,[["__scopeId","data-v-4eea3e10"]]),oe={class:"player-name"},re={class:"player-score"},ce={class:"hand"},_e=h({__name:"GameOtherPlayerListItem",props:{player:{},hasTurn:{type:Boolean}},setup(o){const e=o;return(s,r)=>{const n=d("v-chip"),c=d("v-icon"),v=d("v-card");return t(),_(v,{class:b(e.hasTurn&&"v-card--turn-holder"),color:C(T)(e.player)},{title:a(()=>[e.player.isBust?(t(),_(n,{key:0,color:"error",variant:"elevated"},{default:a(()=>[m("BUSTED")]),_:1})):w("",!0),e.player.isStand?(t(),_(n,{key:1,color:"primary",variant:"elevated"},{default:a(()=>[m("STAND")]),_:1})):w("",!0),l(c,{color:"secondary"},{default:a(()=>[m(D(e.player.icon),1)]),_:1}),x("span",oe,D(e.player.name),1),x("span",re,"score: "+D(e.player.score),1)]),default:a(()=>[x("div",ce,[(t(!0),p(P,null,G(e.player.hand,u=>(t(),p("span",null,[l($,{card:u,size:5},null,8,["card"])]))),256))])]),_:1},8,["class","color"])}}});const de=g(_e,[["__scopeId","data-v-aa394c4d"]]),ue={class:"player-container"},ie=h({__name:"GameOtherPlayerList",props:{players:{},currentPlayer:{}},setup(o){const e=o,s=R(()=>V(e.players));return(r,n)=>(t(),p("div",ue,[(t(!0),p(P,null,G(s.value,c=>(t(),p("span",{key:c.id},[l(de,{player:c,"has-turn":c.id===r.currentPlayer},null,8,["player","has-turn"])]))),128))]))}});const pe=g(ie,[["__scopeId","data-v-316d8254"]]),ve=h({__name:"CardBack",props:{size:{}},setup(o){E(r=>({"42cf2939":s(e.size)}));const e=o,s=r=>`${r}rem`;return(r,n)=>(t(),p("div",null,[l(A,{name:"card_back"})]))}});const ye=g(ve,[["__scopeId","data-v-3ca9c243"]]),me=o=>(W("data-v-677d225a"),o=o(),M(),o),fe=me(()=>x("span",null,"Dealer",-1)),he=h({__name:"GameDealer",props:{dealer:{},is1on1:{type:Boolean}},setup(o){const e=o;return(s,r)=>{const n=d("v-chip"),c=d("v-card");return t(),_(c,{color:C(T)(s.dealer)},{title:a(()=>[x("div",{class:b(e.is1on1?"name-1on1":"")},[e.dealer.isStand?(t(),_(n,{key:0,color:"primary",variant:"elevated"},{default:a(()=>[m("STAND")]),_:1})):w("",!0),fe],2)]),default:a(()=>[x("div",{class:b(e.is1on1?"dealer-hand dealer-hand--1on1":"dealer-hand")},[l($,{card:e.dealer.publicHand,size:9.5},null,8,["card"]),(t(!0),p(P,null,G(new Array(s.dealer.handCount-1),v=>(t(),_(ye,{size:9.5}))),256))],2)]),_:1},8,["color"])}}});const ge=g(he,[["__scopeId","data-v-677d225a"]]),Ie=h({__name:"GameResultDialogRow",props:{isDealer:{type:Boolean},player:{}},setup(o){const e=o;return(s,r)=>{const n=d("v-col"),c=d("v-chip"),v=d("v-row"),u=d("v-container");return t(),_(v,{align:"center",dense:"",justify:"center"},{default:a(()=>[e.isDealer?(t(),_(n,{key:0,cols:"4",class:"name"},{default:a(()=>[m("Dealer")]),_:1})):(t(),_(n,{key:1,cols:"2",class:"name"},{default:a(()=>[m(D(e.player.name),1)]),_:1})),e.isDealer?w("",!0):(t(),_(n,{key:2,cols:"2",class:"chip"},{default:a(()=>[e.player.isWin?(t(),_(c,{key:0,size:"x-large",color:"success",variant:"elevated"},{default:a(()=>[m("WIN")]),_:1})):(t(),_(c,{key:1,size:"x-large",color:"error",variant:"elevated"},{default:a(()=>[m("LOSE")]),_:1}))]),_:1})),l(n,{cols:"1",class:"score"},{default:a(()=>[m(D(e.player.score),1)]),_:1}),l(n,{cols:"5"},{default:a(()=>[l(u,null,{default:a(()=>[l(v,{justify:"center",align:"center"},{default:a(()=>[(t(!0),p(P,null,G(e.player.hand,f=>(t(),_(n,{class:"card"},{default:a(()=>[l($,{card:f,size:4},null,8,["card"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1})}}});const O=g(Ie,[["__scopeId","data-v-470456c4"]]),we=h({__name:"GameResultDialog",props:{dialog:{type:Boolean}},setup(o){const e=o,s=k(null),r=k([]),n=k(null);N(async()=>{n.value=window.setInterval(async()=>{const u=await(await fetch(`${z}/api/round/result`)).json();s.value=H(u.Dealer),r.value=u.Players.map(U),!(u.Players==null||u.Dealer==null)&&n.value&&window.clearInterval(n.value)},1e3)});const c=()=>{J.push("/lobby")};return q(()=>{n.value&&window.clearInterval(n.value)}),(v,u)=>{const f=d("v-container"),i=d("v-btn"),y=d("v-card-actions"),I=d("v-card"),S=d("v-dialog");return t(),_(S,{modelValue:e.dialog,"onUpdate:modelValue":u[0]||(u[0]=B=>e.dialog=B),"max-width":"70vw"},{default:a(()=>[l(I,null,{default:a(()=>[l(f,null,{default:a(()=>[s.value?(t(),_(O,{key:0,"is-dealer":!0,player:s.value},null,8,["player"])):w("",!0),(t(!0),p(P,null,G(r.value,B=>(t(),_(O,{key:B.id,"is-dealer":!1,player:B},null,8,["player"]))),128))]),_:1}),l(y,null,{default:a(()=>[l(i,{color:"primary",variant:"elevated",size:"large",onClick:c},{default:a(()=>[m(" ロビーに戻る ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const ke=g(we,[["__scopeId","data-v-18f6e057"]]),xe=h({__name:"Game",setup(o){const e=k([]),s=k(!1),r=R(()=>e.value.filter(i=>i.id!==localStorage.getItem("id"))),n=R(()=>e.value.find(i=>i.id===localStorage.getItem("id"))),c=k(null),v=k(""),u=k(null);N(async()=>{c.value=window.setInterval(async()=>{const i=await fetch(`${z}/api/round`);if(i.ok){const y=await i.json();e.value=y.Players.map(j),v.value=y.CurrentPlayer,u.value=L(y.Dealer),s.value=y.IsEnd,y.IsEnd&&c.value&&window.clearInterval(c.value)}else console.log(i)},1e3)});const f=async i=>{const y=await fetch(`${z}/api/round/action`,{method:"POST",body:JSON.stringify({action:i,id:localStorage.getItem("id")})});if(y.ok){const I=await y.json();e.value=I.Players.map(j),v.value=I.CurrentPlayer,u.value=L(I.Dealer)}else console.log(y)};return K(()=>{c.value&&window.clearInterval(c.value)}),(i,y)=>{const I=d("v-col"),S=d("v-row"),B=d("v-container");return t(),p(P,null,[l(ke,{dialog:s.value},null,8,["dialog"]),l(B,{class:"layout-root"},{default:a(()=>[l(S,null,{default:a(()=>[r.value.length!==0?(t(),_(I,{key:0},{default:a(()=>[l(pe,{players:r.value,"current-player":v.value},null,8,["players","current-player"])]),_:1})):w("",!0),l(I,null,{default:a(()=>[u.value?(t(),_(ge,{key:0,dealer:u.value,is1on1:r.value.length===0},null,8,["dealer","is1on1"])):w("",!0)]),_:1})]),_:1}),l(S,{justify:"center"},{default:a(()=>[n.value?(t(),_(le,{key:0,player:n.value,"has-turn":n.value.id===v.value,onAction:f},null,8,["player","has-turn"])):w("",!0)]),_:1})]),_:1})],64)}}});const Be=g(xe,[["__scopeId","data-v-293f3aa9"]]);export{Be as default};
