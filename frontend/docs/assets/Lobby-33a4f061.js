import{T as I}from"./Title-826f512d.js";import{d as f,a as o,o as r,b as v,w as n,f as y,e as t,t as w,j as $,_ as C,r as g,k as j,l as P,m as z,c as N,h as x,F as k,n as T,i as d}from"./index-e70186fd.js";import{B as m,t as V,p as D}from"./Player-ea3467f4.js";const E=f({__name:"LobbyButton",emits:["click"],setup(u,{emit:a}){const s=a,l=()=>{s("click")};return(_,i)=>{const e=o("v-btn");return r(),v(e,{size:"x-large",color:"primary",onClick:l},{default:n(()=>[y("ゲーム開始")]),_:1})}}}),F={class:"name-text"},S=f({__name:"LobbyPlayerCard",props:{icon:{},name:{}},setup(u){const a=u;return(s,l)=>{const _=o("v-icon"),i=o("v-card");return r(),v(i,{variant:"outlined"},{title:n(()=>[t(_,{size:"x-large",color:"secondary"},{default:n(()=>[y(w(a.icon),1)]),_:1}),$("span",F,w(a.name),1)]),_:1})}}});const U=C(S,[["__scopeId","data-v-7ed63bac"]]),A=f({__name:"Lobby",setup(u){const a=g([]),s=g(null);j(async()=>{s.value=window.setInterval(async()=>{const e=await fetch(`${m}/api/lobby`);if(e.ok){const c=await e.json();a.value=c.map(V)}else console.error(e)},1e3)}),P(a,(e,c)=>{c.length>0&&e.length<c.length&&(alert("ロビーがリセットされました"),d.push("/"))}),z(()=>{s.value&&window.clearInterval(s.value)});const l=N(()=>D(a.value)),_=async()=>{const e=await fetch(`${m}/api/lobby/start`);e.ok?d.push("/game"):(console.error(e),alert("エラーが発生しました"))},i=async()=>{await fetch(`${m}/api/lobby/reset`),d.push("/")};return(e,c)=>{const L=o("v-btn"),p=o("v-row"),b=o("v-col"),B=o("v-container");return r(),x(k,null,[t(I),t(B,null,{default:n(()=>[t(p,{align:"center",justify:"center"},{default:n(()=>[t(L,{rounded:"",color:"warning",onClick:i,size:"small"},{default:n(()=>[y("リセット")]),_:1})]),_:1}),(r(!0),x(k,null,T(l.value,h=>(r(),v(p,{align:"center",justify:"center"},{default:n(()=>[t(b,{class:"player-card"},{default:n(()=>[t(U,{name:h.name,icon:h.icon},null,8,["name","icon"])]),_:2},1024)]),_:2},1024))),256)),t(p,null,{default:n(()=>[t(b,{class:"start-btn","align-self":"end"},{default:n(()=>[t(E,{onClick:_})]),_:1})]),_:1})]),_:1})],64)}}});const W=C(A,[["__scopeId","data-v-f1929cda"]]);export{W as default};
